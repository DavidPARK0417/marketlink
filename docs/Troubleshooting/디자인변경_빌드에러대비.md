---
description: λΉλ“ μ—λ¬ μλ°© κ°€μ΄λ“λΌμΈ - TypeScript νƒ€μ… μ²΄ν¬, import, μ»΄ν¬λ„νΈ prop μΌκ΄€μ„± λ“± λΉλ“ μ‹ λ°μƒν•λ” μ—λ¬λ¥Ό μ‚¬μ „μ— λ°©μ§€ν•κΈ° μ„ν• μ²΄ν¬λ¦¬μ¤νΈμ™€ κ·μΉ™
globs: **/*.ts,**/*.tsx
alwaysApply: true
---

# λΉλ“ μ—λ¬ μλ°© κ°€μ΄λ“λΌμΈ

μ΄ λ¬Έμ„λ” Next.js ν”„λ΅μ νΈμ—μ„ λΉλ“ μ‹ λ°μƒν•λ” TypeScript νƒ€μ… μ—λ¬μ™€ λ°νƒ€μ„ μ—λ¬λ¥Ό μ‚¬μ „μ— λ°©μ§€ν•κΈ° μ„ν• μ²΄ν¬λ¦¬μ¤νΈμ™€ κ·μΉ™μ„ μ κ³µν•©λ‹λ‹¤.

## π¨ μ£Όμ” λΉλ“ μ—λ¬ μ ν• λ° ν•΄κ²° λ°©λ²•

### 1. Import λ„λ½ μ—λ¬

**μ—λ¬ μμ‹:**
```
ReferenceError: Button is not defined
```

**μλ°© λ°©λ²•:**
- μ»΄ν¬λ„νΈ μ‚¬μ© μ „ λ°λ“μ‹ import λ¬Έ ν™•μΈ
- IDEμ μλ™μ™„μ„± κΈ°λ¥ ν™μ©
- μ»΄ν¬λ„νΈ μ‚¬μ© μ‹ μ¦‰μ‹ import μ¶”κ°€

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] μ‚¬μ©ν•λ” λ¨λ“  μ»΄ν¬λ„νΈκ°€ import λμ–΄ μλ”κ°€?
- [ ] shadcn/ui μ»΄ν¬λ„νΈλ” `/components/ui/` κ²½λ΅μ—μ„ import ν•λ”κ°€?
- [ ] lucide-react μ•„μ΄μ½μ€ `from 'lucide-react'`μ—μ„ import ν•λ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: import λ„λ½
export default function ProductTable() {
  return <Button>ν΄λ¦­</Button>; // μ—λ¬ λ°μƒ
}

// β… μΆ‹μ€ μ: import λ…μ‹
import { Button } from "@/components/ui/button";

export default function ProductTable() {
  return <Button>ν΄λ¦­</Button>;
}
```

### 2. νƒ€μ… μ •μ λ„λ½ μ—λ¬

**μ—λ¬ μμ‹:**
```
Type error: Property 'unit' does not exist on type 'Product'.
Type error: Property 'user_anonymous_code' does not exist on type 'OrderDetail'.
```

**μλ°© λ°©λ²•:**
- μΈν„°νμ΄μ¤/νƒ€μ… μ •μ μ‹ μ‹¤μ  μ‚¬μ©λλ” λ¨λ“  μ†μ„± ν¬ν•¨
- λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Όμ™€ νƒ€μ… μ •μ μΌμΉ ν™•μΈ
- Optional μ†μ„±μ€ `?` ν‘μ‹λ΅ λ…ν™•ν κµ¬λ¶„

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] μΈν„°νμ΄μ¤μ— μ‹¤μ  μ‚¬μ©λλ” λ¨λ“  μ†μ„±μ΄ μ •μλμ–΄ μλ”κ°€?
- [ ] λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Όμ λ¨λ“  ν•„λ“κ°€ νƒ€μ…μ— λ§¤ν•‘λμ–΄ μλ”κ°€?
- [ ] Optional μ†μ„±μ€ `?`λ΅ ν‘μ‹λμ–΄ μλ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: μ†μ„± λ„λ½
interface Product {
  id: string;
  name: string;
  price: number;
  // unit μ†μ„±μ΄ μ—†μ
}

// μ‚¬μ© μ‹ μ—λ¬ λ°μƒ
const unit = product.unit; // Property 'unit' does not exist

// β… μΆ‹μ€ μ: λ¨λ“  μ†μ„± ν¬ν•¨
interface Product {
  id: string;
  name: string;
  price: number;
  unit?: string | null; // Optional μ†μ„± λ…μ‹
  origin?: string | null;
}
```

**λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬μ™€ νƒ€μ… λ§¤ν•‘:**
```typescript
// β λ‚μ μ: μΏΌλ¦¬ κ²°κ³Όμ™€ νƒ€μ… λ¶μΌμΉ
const orders: OrderDetail[] = data.map((order: any) => ({
  ...order,
  product: order.products,
  // retailer μ •λ³΄ λ„λ½
}));

// β… μΆ‹μ€ μ: λ¨λ“  ν•„λ“ λ§¤ν•‘
const orders: OrderDetail[] = data.map((order: any) => ({
  ...order,
  product: order.products,
  variant: order.product_variants,
  retailer: order.retailers, // λ…μ‹μ μΌλ΅ λ§¤ν•‘
  user_anonymous_code: order.retailers?.anonymous_code ?? null,
}));
```

### 3. HTML μ†μ„±κ³Ό μ»¤μ¤ν…€ Prop μ¶©λ

**μ—λ¬ μμ‹:**
```
Type error: Interface 'InputProps' incorrectly extends interface 'InputHTMLAttributes<HTMLInputElement>'.
Types of property 'size' are incompatible. Type 'string' is not assignable to type 'number'.
```

**μλ°© λ°©λ²•:**
- HTML ν‘μ¤€ μ†μ„±κ³Ό λ™μΌν• μ΄λ¦„μ μ»¤μ¤ν…€ prop μ‚¬μ© μ‹ `Omit` μ ν‹Έλ¦¬ν‹° νƒ€μ… μ‚¬μ©
- μ»¤μ¤ν…€ prop μ΄λ¦„μ„ λ‹¤λ¥΄κ² λ³€κ²½ (μ: `size` β†’ `inputSize`)

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] μ»¤μ¤ν…€ propμ΄ HTML ν‘μ¤€ μ†μ„±κ³Ό μ΄λ¦„μ΄ κ²ΉμΉλ”κ°€?
- [ ] κ²ΉμΉλ” κ²½μ° `Omit`μΌλ΅ μ›λ³Έ μ†μ„±μ„ μ μ™Έν–λ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: HTML μ†μ„±κ³Ό μ¶©λ
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  size?: "sm" | "md" | "lg"; // HTMLμ size(number)μ™€ μ¶©λ
}

// β… μΆ‹μ€ μ: OmitμΌλ΅ μ›λ³Έ μ†μ„± μ μ™Έ
interface InputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, "size"> {
  size?: "sm" | "md" | "lg"; // μ΄μ  μ¶©λ μ—†μ
}

// β… λ€μ•: λ‹¤λ¥Έ μ΄λ¦„ μ‚¬μ©
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  inputSize?: "sm" | "md" | "lg"; // size λ€μ‹  inputSize μ‚¬μ©
}
```

**μ μ© λ€μƒ:**
- `Input`, `Select`, `Textarea`, `Checkbox`, `Radio` λ“± HTML νΌ μ”μ†λ¥Ό ν™•μ¥ν•λ” μ»΄ν¬λ„νΈ
- `size`, `width`, `height` λ“± HTML ν‘μ¤€ μ†μ„±κ³Ό κ²ΉμΉ  μ μλ” prop

### 4. μ΅΄μ¬ν•μ§€ μ•λ” λ¨λ“ Import μ—λ¬

**μ—λ¬ μμ‹:**
```
Cannot find module '@/lib/dummy-data' or its corresponding type declarations.
```

**μλ°© λ°©λ²•:**
- Import μ „ νμΌ μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ
- λ”λ―Έ λ°μ΄ν„°λ” μ»΄ν¬λ„νΈ λ‚΄λ¶€μ— μ •μν•κ±°λ‚ λ³„λ„ νμΌλ΅ λ…ν™•ν μƒμ„±
- κ²½λ΅ alias(`@/`) μ‚¬μ© μ‹ μ¬λ°”λ¥Έ κ²½λ΅μΈμ§€ ν™•μΈ

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] Importν•λ” λ¨λ“μ΄ μ‹¤μ λ΅ μ΅΄μ¬ν•λ”κ°€?
- [ ] κ²½λ΅ aliasκ°€ μ¬λ°”λ¥Έκ°€?
- [ ] λ”λ―Έ λ°μ΄ν„°λ” μ–΄λ””μ— μ •μν• μ§€ λ…ν™•ν ν–λ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: μ΅΄μ¬ν•μ§€ μ•λ” λ¨λ“ import
import { getDummyPriceHistory } from "@/lib/dummy-data"; // νμΌμ΄ μ—†μ

// β… μΆ‹μ€ μ 1: μ»΄ν¬λ„νΈ λ‚΄λ¶€μ— μ •μ
function PriceChartModal() {
  // λ”λ―Έ λ°μ΄ν„° μƒμ„± ν•¨μλ¥Ό μ»΄ν¬λ„νΈ λ‚΄λ¶€μ— μ •μ
  function getDummyPriceHistory(productName: string) {
    // ...
  }
  
  const data = getDummyPriceHistory(product.name);
  // ...
}

// β… μΆ‹μ€ μ 2: λ³„λ„ νμΌλ΅ λ…ν™•ν μƒμ„±
// lib/dummy-data.ts νμΌ μƒμ„± ν›„
import { getDummyPriceHistory } from "@/lib/dummy-data";
```

### 5. μ»΄ν¬λ„νΈ Prop λ¶μΌμΉ μ—λ¬

**μ—λ¬ μμ‹:**
```
Type error: Property 'isOpen' does not exist on type 'IntrinsicAttributes & TermsModalProps'.
Did you mean 'open'?
```

**μλ°© λ°©λ²•:**
- μ»΄ν¬λ„νΈ μ‚¬μ© μ „ μ‹¤μ  μ»΄ν¬λ„νΈμ prop μΈν„°νμ΄μ¤ ν™•μΈ
- shadcn/ui μ»΄ν¬λ„νΈλ” Radix UI ν¨ν„΄μ„ λ”°λ¦„ (`open`, `onOpenChange`)
- μ»¤μ¤ν…€ μ»΄ν¬λ„νΈλ” μΌκ΄€λ prop λ„¤μ΄λ° κ·μΉ™ μ μ©

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈμ μ‹¤μ  prop μΈν„°νμ΄μ¤λ¥Ό ν™•μΈν–λ”κ°€?
- [ ] shadcn/ui μ»΄ν¬λ„νΈλ” `open`/`onOpenChange` ν¨ν„΄μ„ μ‚¬μ©ν•λ”κ°€?
- [ ] μ»¤μ¤ν…€ μ»΄ν¬λ„νΈμ prop μ΄λ¦„μ΄ μΌκ΄€λκ² μ‚¬μ©λλ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: μλ»λ prop μ΄λ¦„
<TermsModal
  isOpen={activeModal === 'terms'}  // μ‹¤μ λ΅λ” 'open'
  onClose={() => setActiveModal(null)}  // μ‹¤μ λ΅λ” 'onOpenChange'
  title="μ΄μ©μ•½κ΄€"  // μ‹¤μ λ΅λ” μ΄ propμ΄ μ—†μ
/>

// β… μΆ‹μ€ μ: μ‹¤μ  μ»΄ν¬λ„νΈ μΈν„°νμ΄μ¤ ν™•μΈ ν›„ μ‚¬μ©
// components/TermsModal.tsx ν™•μΈ
interface TermsModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

// μ¬λ°”λ¥Έ μ‚¬μ©
<TermsModal
  open={activeModal === 'terms'}
  onOpenChange={(open) => setActiveModal(open ? 'terms' : null)}
/>
```

**shadcn/ui μ»΄ν¬λ„νΈ ν¨ν„΄:**
```typescript
// shadcn/uiλ” Radix UI ν¨ν„΄μ„ λ”°λ¦„
// Dialog, Popover, DropdownMenu λ“±
interface DialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

// μ»¤μ¤ν…€ λ¨λ‹¬λ„ λ™μΌν• ν¨ν„΄ κ¶μ¥
interface CustomModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  // λ‹¤λ¥Έ props...
}
```

### 6. ν•¨μ νλΌλ―Έν„° νƒ€μ… λ¶μΌμΉ

**μ—λ¬ μμ‹:**
```
Type error: Argument of type 'string | number' is not assignable to parameter of type 'number'.
```

**μλ°© λ°©λ²•:**
- ν•¨μ νλΌλ―Έν„° νƒ€μ…μ„ μ‹¤μ  μ‚¬μ©λλ” κ°’μ νƒ€μ…κ³Ό μΌμΉμ‹ν‚¤κΈ°
- `id` κ°™μ€ μ‹λ³„μλ” `string | number`λ΅ μ •μν•λ” κ²ƒμ΄ μ•μ „
- νƒ€μ… λ‹¨μ–Έ(`as`) μ‚¬μ©μ€ μµν›„μ μλ‹¨μΌλ΅λ§ μ‚¬μ©

**μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] ν•¨μ νλΌλ―Έν„° νƒ€μ…μ΄ μ‹¤μ  μ „λ‹¬λλ” κ°’μ νƒ€μ…κ³Ό μΌμΉν•λ”κ°€?
- [ ] `id` κ°™μ€ μ‹λ³„μλ” `string | number`λ΅ μ •μν–λ”κ°€?

**μμ‹:**
```typescript
// β λ‚μ μ: νƒ€μ…μ΄ λ„λ¬΄ μΆκ² μ •μλ¨
interface ProductTableProps {
  onEdit?: (id: number) => void;  // numberλ§ λ°›μ
  onDelete?: (id: number) => void;
}

// μ‚¬μ© μ‹ μ—λ¬ λ°μƒ (row.idλ” string | number)
onEdit(row.id); // Type 'string | number' is not assignable to type 'number'

// β… μΆ‹μ€ μ: μ‹¤μ  μ‚¬μ©λλ” νƒ€μ…κ³Ό μΌμΉ
interface ProductTableProps {
  onEdit?: (id: string | number) => void;  // string | numberλ΅ λ³€κ²½
  onDelete?: (id: string | number) => void;
}

// λλ” μΈν„°νμ΄μ¤μ—μ„ id νƒ€μ… ν™•μΈ
interface TableRow {
  id: string | number;  // idλ” string | number
  [key: string]: any;
}
```

## π“‹ λΉλ“ μ „ μ²΄ν¬λ¦¬μ¤νΈ

μ½”λ“ μ‘μ„± ν›„ λΉλ“ μ „μ— λ‹¤μ ν•­λ©μ„ ν™•μΈν•μ„Έμ”:

### Import κ΄€λ ¨
- [ ] μ‚¬μ©ν•λ” λ¨λ“  μ»΄ν¬λ„νΈκ°€ import λμ–΄ μλ”κ°€?
- [ ] shadcn/ui μ»΄ν¬λ„νΈλ” μ¬λ°”λ¥Έ κ²½λ΅μ—μ„ import ν•λ”κ°€?
- [ ] lucide-react μ•„μ΄μ½μ€ μ¬λ°”λ¥΄κ² import ν•λ”κ°€?
- [ ] μ΅΄μ¬ν•μ§€ μ•λ” λ¨λ“μ„ import ν•μ§€ μ•μ•λ”κ°€?

### νƒ€μ… μ •μ κ΄€λ ¨
- [ ] μΈν„°νμ΄μ¤μ— μ‹¤μ  μ‚¬μ©λλ” λ¨λ“  μ†μ„±μ΄ μ •μλμ–΄ μλ”κ°€?
- [ ] λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Όμ λ¨λ“  ν•„λ“κ°€ νƒ€μ…μ— λ§¤ν•‘λμ–΄ μλ”κ°€?
- [ ] Optional μ†μ„±μ€ `?`λ΅ λ…μ‹λμ–΄ μλ”κ°€?
- [ ] HTML μ†μ„±κ³Ό μ»¤μ¤ν…€ propμ΄ μ¶©λν•μ§€ μ•λ”κ°€?

### μ»΄ν¬λ„νΈ Prop κ΄€λ ¨
- [ ] μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈμ μ‹¤μ  prop μΈν„°νμ΄μ¤λ¥Ό ν™•μΈν–λ”κ°€?
- [ ] shadcn/ui μ»΄ν¬λ„νΈλ” `open`/`onOpenChange` ν¨ν„΄μ„ μ‚¬μ©ν•λ”κ°€?
- [ ] ν•¨μ νλΌλ―Έν„° νƒ€μ…μ΄ μ‹¤μ  μ „λ‹¬λλ” κ°’μ νƒ€μ…κ³Ό μΌμΉν•λ”κ°€?

### μΌλ°μ μΈ ν™•μΈ μ‚¬ν•­
- [ ] TypeScript μ»΄νμΌ μ—λ¬κ°€ μ—†λ”κ°€? (`pnpm run build` μ‹¤ν–‰)
- [ ] ESLint κ²½κ³ λ¥Ό ν™•μΈν–λ”κ°€?
- [ ] μ‚¬μ©ν•μ§€ μ•λ” importκ°€ μ—†λ”κ°€?

## π”§ λ””λ²„κΉ… ν”„λ΅μ„Έμ¤

λΉλ“ μ—λ¬κ°€ λ°μƒν–μ„ λ• λ‹¤μ μμ„λ΅ ν™•μΈν•μ„Έμ”:

1. **μ—λ¬ λ©”μ‹μ§€ λ¶„μ„**
   - μ—λ¬ νƒ€μ… ν™•μΈ (Type error, ReferenceError λ“±)
   - μ—λ¬κ°€ λ°μƒν• νμΌκ³Ό λΌμΈ λ²νΈ ν™•μΈ
   - μ—λ¬ λ©”μ‹μ§€μ μ μ• μ‚¬ν•­ ν™•μΈ ("Did you mean...?")

2. **κ΄€λ ¨ νμΌ ν™•μΈ**
   - μ—λ¬κ°€ λ°μƒν• νμΌ μ½κΈ°
   - κ΄€λ ¨ νƒ€μ… μ •μ νμΌ ν™•μΈ (`types/` λ””λ ‰ν† λ¦¬)
   - μ‹¤μ  μ»΄ν¬λ„νΈ νμΌ ν™•μΈ (`components/` λ””λ ‰ν† λ¦¬)

3. **λΉ„μ·ν• ν¨ν„΄ μ°ΎκΈ°**
   - ν”„λ΅μ νΈ λ‚΄ λΉ„μ·ν• μ½”λ“ ν¨ν„΄ κ²€μƒ‰
   - κ°™μ€ λ¬Έμ κ°€ λ‹¤λ¥Έ νμΌμ—λ„ μλ”μ§€ ν™•μΈ

4. **μμ • λ° κ²€μ¦**
   - μμ • ν›„ λΉλ“ λ‹¤μ‹ μ‹¤ν–‰
   - κ΄€λ ¨λ λ‹¤λ¥Έ νμΌλ„ ν•¨κ» μμ •

## π’΅ Best Practices

### 1. νƒ€μ… μ •μλ” μ‹¤μ  μ‚¬μ©κ³Ό μΌμΉμ‹ν‚¤κΈ°

```typescript
// μ‹¤μ  λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Όλ¥Ό ν™•μΈν•κ³  νƒ€μ… μ •μ
const data = await supabase
  .from('orders')
  .select(`
    *,
    products:products(*),
    retailers:retailers(*)
  `)
  .single();

// μΏΌλ¦¬ κ²°κ³Όμ— λ§μ¶° νƒ€μ… μ •μ
interface OrderDetail extends Order {
  product: Product;
  retailer?: {
    id: string;
    anonymous_code: string;
  } | null;
  user_anonymous_code?: string | null;
}
```

### 2. μ»΄ν¬λ„νΈ Prop μΈν„°νμ΄μ¤ λ…ν™•ν μ •μ

```typescript
// μ»΄ν¬λ„νΈ νμΌ μƒλ‹¨μ— λ…ν™•ν• μΈν„°νμ΄μ¤ μ •μ
interface TermsModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

export default function TermsModal({ open, onOpenChange }: TermsModalProps) {
  // ...
}
```

### 3. HTML μ†μ„± ν™•μ¥ μ‹ Omit μ‚¬μ©

```typescript
// HTML μ†μ„±κ³Ό μ¶©λ κ°€λ¥ν• propμ€ OmitμΌλ΅ μ²λ¦¬
interface InputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, "size"> {
  size?: "sm" | "md" | "lg";
  error?: boolean;
  errorMessage?: string;
}
```

### 4. ID νƒ€μ…μ€ μ μ—°ν•κ²

```typescript
// IDλ” string | numberλ΅ μ •μν•μ—¬ μ μ—°μ„± ν™•λ³΄
interface TableRow {
  id: string | number;
  [key: string]: any;
}

// ν•¨μ νλΌλ―Έν„°λ„ λ™μΌν•κ²
function handleEdit(id: string | number) {
  // ...
}
```

## π“ μ°Έκ³  μλ£

- [TypeScript Handbook - Utility Types](https://www.typescriptlang.org/docs/handbook/utility-types.html)
- [Radix UI - Component API Patterns](https://www.radix-ui.com/primitives/docs/overview/getting-started)
- [Next.js - TypeScript](https://nextjs.org/docs/app/building-your-application/configuring/typescript)

---

**κΈ°μ–µν•μ„Έμ”**: λΉλ“ μ—λ¬λ” λ€λ¶€λ¶„ νƒ€μ… λ¶μΌμΉλ‚ import λ„λ½μ—μ„ λ°μƒν•©λ‹λ‹¤. μ½”λ“ μ‘μ„± μ‹ μ„μ μ²΄ν¬λ¦¬μ¤νΈλ¥Ό ν™•μΈν•λ©΄ λ€λ¶€λ¶„μ μ—λ¬λ¥Ό μ‚¬μ „μ— λ°©μ§€ν•  μ μμµλ‹λ‹¤.
